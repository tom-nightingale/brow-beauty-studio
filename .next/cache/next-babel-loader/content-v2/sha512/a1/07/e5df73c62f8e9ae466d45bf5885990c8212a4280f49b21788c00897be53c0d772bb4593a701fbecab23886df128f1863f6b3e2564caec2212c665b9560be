{"ast":null,"code":"import tiny from 'tiny-json-http';\nexport async function request({\n  query,\n  variables,\n  preview\n}) {\n  const endpoint = preview ? `https://graphql.datocms.com/preview` : `https://graphql.datocms.com/`;\n  const {\n    body\n  } = await tiny.post({\n    url: endpoint,\n    headers: {\n      authorization: `Bearer ${process.env.NEXT_DATOCMS_API_TOKEN}`\n    },\n    data: {\n      query,\n      variables\n    }\n  });\n\n  if (body.errors) {\n    console.error(\"Ouch! The query has some errors!\");\n    throw body.errors;\n  }\n\n  return body.data;\n}","map":{"version":3,"sources":["C:/wamp64/www/brow-beauty.next/lib/datocms.js"],"names":["tiny","request","query","variables","preview","endpoint","body","post","url","headers","authorization","process","env","NEXT_DATOCMS_API_TOKEN","data","errors","console","error"],"mappings":"AAAA,OAAOA,IAAP,MAAiB,gBAAjB;AAEA,OAAO,eAAeC,OAAf,CAAuB;AAAEC,EAAAA,KAAF;AAASC,EAAAA,SAAT;AAAoBC,EAAAA;AAApB,CAAvB,EAAsD;AACzD,QAAMC,QAAQ,GAAGD,OAAO,GACrB,qCADqB,GAErB,8BAFH;AAIA,QAAM;AAAEE,IAAAA;AAAF,MAAW,MAAMN,IAAI,CAACO,IAAL,CAAU;AAC7BC,IAAAA,GAAG,EAAEH,QADwB;AAE7BI,IAAAA,OAAO,EAAE;AACLC,MAAAA,aAAa,EAAG,UAASC,OAAO,CAACC,GAAR,CAAYC,sBAAuB;AADvD,KAFoB;AAK7BC,IAAAA,IAAI,EAAE;AACFZ,MAAAA,KADE;AAEFC,MAAAA;AAFE;AALuB,GAAV,CAAvB;;AAWA,MAAIG,IAAI,CAACS,MAAT,EAAiB;AACbC,IAAAA,OAAO,CAACC,KAAR,CAAc,kCAAd;AACA,UAAMX,IAAI,CAACS,MAAX;AACH;;AAED,SAAOT,IAAI,CAACQ,IAAZ;AACH","sourcesContent":["import tiny from 'tiny-json-http';\n\nexport async function request({ query, variables, preview }) {\n    const endpoint = preview\n    ? `https://graphql.datocms.com/preview`\n    : `https://graphql.datocms.com/`;\n\n    const { body } = await tiny.post({\n        url: endpoint,\n        headers: {\n            authorization: `Bearer ${process.env.NEXT_DATOCMS_API_TOKEN}`,\n        },\n        data: {\n            query,\n            variables,\n        },\n    });\n\n    if (body.errors) {\n        console.error(\"Ouch! The query has some errors!\");\n        throw body.errors;\n    }\n\n    return body.data;\n}"]},"metadata":{},"sourceType":"module"}